# Force redeploy v5.0.11 - Reliable Exit Price - 5 Dec 2025 Thu
# ğŸ›¡ï¸ CRITICAL FIX: Wrong PnL calculation on position close!
#
# ğŸ¯ v5.0.11 FEATURES:
#   âœ… Reliable exit price detection
#   âœ… Check both close_order.get('average') AND 'price'
#   âœ… If None/0, fetch fresh ticker from exchange
#   âœ… Better precision (.8f) for low-price coins like DENT
#
# ğŸ› BUG FIXED:
#   âŒ DENT LONG: Profit target hit $+6.88
#      â€¢ Position closed with Gross P&L: $0.00, Net P&L: -$1.00
#      â€¢ close_order.get('average') returned None
#      â€¢ Fallback to old current_price (â‰ˆentry_price)
#      â€¢ Result: 0% price change â†’ $0 PnL
#
#   âœ… NEW LOGIC:
#      â€¢ raw_exit_price = close_order.get('average') or close_order.get('price')
#      â€¢ If None/0 â†’ fetch fresh ticker price
#      â€¢ Log: "Exit price from order fill" or "Exit price from fresh ticker"
#
# ğŸ“Š Previous versions:
#   - v5.0.10: Async Portfolio Updates
#   - v5.0.9: Trendline Price Position Validation
#   - v5.0.8: Level Proximity Re-Validation
